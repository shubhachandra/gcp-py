import pandas as pd
import json

INPUT_JSON = 'subnet_logs.json'
OUTPUT_CSV = 'subnet_allocation_report.csv'

# Read JSON file
with open(INPUT_JSON, 'r') as json_file:
    logs_data = json.load(json_file)

# Extract subnet utilization details
subnet_data = []
for entry in logs_data:
    subnet_utilization = entry.get('subnetIPultilization', {})
    subnet_uri = subnet_utilization.get('subnetURI', 'Unknown')
    allocation_ratio = subnet_utilization.get('allocationRatio', 'N/A')

    subnet_data.append({
        'Subnet URI': subnet_uri,
        'Allocation Ratio': allocation_ratio
    })

# Create DataFrame and export to CSV
subnet_df = pd.DataFrame(subnet_data).drop_duplicates()
subnet_df.to_csv(OUTPUT_CSV, index=False)

print(f"Subnet allocation report saved to {OUTPUT_CSV}")
